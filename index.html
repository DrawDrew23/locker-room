<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAWALAT - Locker Room</title>
    <style>
        /* Mobile-First Design */
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: #1a1a1a; 
            color: white; 
            margin: 0; 
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container, #dashboard { 
            width: 100%; 
            max-width: 400px; 
            margin-top: 20px;
        }
        .card, .auth-box { 
            background: #262626; 
            padding: 25px; 
            border-radius: 15px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            margin-bottom: 20px;
            border-left: 5px solid #ffcc00;
        }
        h1 { color: #ffcc00; margin: 0; text-align: center; }
        .slogan { font-style: italic; color: #aaa; font-size: 0.8rem; text-align: center; margin-bottom: 20px; }
        
        /* Inputs & Buttons */
        input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #444; background: #333; color: white; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: #ffcc00; border: none; font-weight: bold; cursor: pointer; border-radius: 8px; margin-top: 10px; font-size: 1rem; }
        
        /* Subscription List - Better for Mobile */
        .price-item { 
            background: #333; 
            padding: 18px; 
            margin: 12px 0; 
            border-radius: 10px; 
            text-align: center; 
            border: 1px solid #444; 
            cursor: pointer;
            transition: 0.2s;
            -webkit-tap-highlight-color: transparent;
        }
        .price-item:active { background: #444; border-color: #ffcc00; }
        .price-item b { color: #ffcc00; font-size: 1.2rem; display: block; }

        /* Payment Modal */
        #payment-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); justify-content: center; align-items: center; z-index: 9999; padding: 20px; box-sizing: border-box; }
        .modal-box { background: #262626; padding: 25px; border-radius: 15px; text-align: center; border: 2px solid #ffcc00; width: 100%; max-width: 320px; }
        .gcash-qr { width: 100%; border-radius: 10px; margin: 15px 0; border: 4px solid white; }
        
        .btn-logout { background: #ff4444; width: auto; padding: 8px 15px; float: right; font-size: 0.8rem; margin-bottom: 10px; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="auth-section" class="auth-box container">
        <h1>PAWALAT</h1>
        <div class="slogan">"kung sain mapapagaan ang gabat mong dara!"</div>
        
        <div id="reg-fields" class="hidden">
            <input type="text" id="fullName" placeholder="Full Name">
            <input type="text" id="phone" placeholder="Phone Number">
            <input type="number" id="age" placeholder="Age">
            <input type="text" id="address" placeholder="Address">
        </div>

        <input type="email" id="email" placeholder="Email Address">
        <input type="password" id="password" placeholder="Password">
        
        <button id="authBtn">LOGIN TO ACCESS</button>
        <p onclick="toggleAuth()" style="text-decoration:underline; font-size:0.8rem; cursor:pointer; text-align:center; color:#ffcc00; margin-top:15px;">Need an account? Register here</p>
    </div>

    <div id="dashboard" class="hidden">
        <button class="btn-logout" onclick="logoutUser()">LOGOUT</button>
        <h1 style="text-align:left;">PAWALAT <span id="dev-tag" style="display:none; font-size:0.6rem; background:#00d4ff; color:black; padding:2px 5px; border-radius:4px;">DEV</span></h1>
        
        <div class="card">
            <h3>Subscription Plans</h3>
            <p style="font-size:0.8rem; color:#aaa;">Tap a plan to pay:</p>
            <div class="price-item" onclick="showPayment('1 Week', '79.00')">1 Week <b>PhP 79.00</b></div>
            <div class="price-item" onclick="showPayment('1 Month', '279.00')">1 Month <b>PhP 279.00</b></div>
            <div class="price-item" onclick="showPayment('6 Months', '779.00')">6 Months <b>PhP 779.00</b></div>
            <div class="price-item" onclick="showPayment('1 Year', '1,779.00')">1 Year <b>PhP 1,779.00</b></div>
        </div>
    </div>

    <div id="payment-modal">
        <div class="modal-box">
            <h2 id="plan-name" style="color:#ffcc00; margin:0;">Plan</h2>
            <p>Amount: <b id="plan-price">PhP 0.00</b></p>
            <img src="https://raw.githubusercontent.com/PawalatAdmin/locker-room/main/58e9eda6-cbbb-46ca-8275-b1dcda0b5a1e.jpg" class="gcash-qr" alt="GCash QR">
            <p><b>MA*Y RO*E L.</b><br>0985 801 ****</p>
            <button onclick="window.location.href='https://forms.gle/UMAnVBHDefJ1S824A'" style="background:#28a745;">I'VE PAID</button>
            <button onclick="document.getElementById('payment-modal').style.display='none'" style="background:none; color:#aaa; border:none; margin-top:10px;">Cancel</button>
        </div>
    </div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBpfwXy5BXCMGJEF7j-IFbv9Z-YFs_UQsE",
    authDomain: "pawalat-9ab8b.firebaseapp.com",
    projectId: "pawalat-9ab8b",
    storageBucket: "pawalat-9ab8b.firebasestorage.app",
    messagingSenderId: "407185284937",
    appId: "1:407185284937:web:ec6f401e27dd891fa80498"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const developers = ["drawdrew79@gmail.com", "danicapadua754@gmail.com"];

  onAuthStateChanged(auth, (user) => {
    if (user) {
        document.getElementById('auth-section').classList.add('hidden');
        document.getElementById('dashboard').classList.remove('hidden');
        if (developers.includes(user.email)) document.getElementById('dev-tag').style.display = 'inline';
    } else {
        document.getElementById('auth-section').classList.remove('hidden');
        document.getElementById('dashboard').classList.add('hidden');
    }
  });

  window.toggleAuth = () => {
    const reg = document.getElementById('reg-fields');
    reg.classList.toggle('hidden');
    document.getElementById('authBtn').innerText = reg.classList.contains('hidden') ? "LOGIN TO ACCESS" : "CREATE ACCOUNT";
  };

  document.getElementById('authBtn').onclick = async () => {
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const isReg = !document.getElementById('reg-fields').classList.contains('hidden');
    try {
      if (!isReg) await signInWithEmailAndPassword(auth, email, password);
      else {
        const res = await createUserWithEmailAndPassword(auth, email, password);
        await setDoc(doc(db, "users", res.user.uid), {
          fullName: document.getElementById('fullName').value,
          phone: document.getElementById('phone').value,
          email: email
        });
      }
    } catch (e) { alert(e.message); }
  };

  window.logoutUser = () => signOut(auth);
  window.showPayment = (plan, price) => {
    document.getElementById('plan-name').innerText = plan;
    document.getElementById('plan-price').innerText = "PhP " + price;
    document.getElementById('payment-modal').style.display = 'flex';
  };
</script>
</body>
</html>
